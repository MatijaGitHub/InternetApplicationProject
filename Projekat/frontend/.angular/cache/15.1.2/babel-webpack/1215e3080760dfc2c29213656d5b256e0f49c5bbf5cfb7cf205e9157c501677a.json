{"ast":null,"code":"import * as L from 'leaflet';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../workshop.service\";\nimport * as i3 from \"@angular/common\";\nfunction WorkshopInfoComponent_tr_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵelement(2, \"img\", 8);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const picture_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"http://localhost:4000/\", picture_r3, \"\", i0.ɵɵsanitizeUrl);\n  }\n}\nfunction WorkshopInfoComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function WorkshopInfoComponent_div_18_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.apply());\n    });\n    i0.ɵɵtext(2, \"Apply\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction WorkshopInfoComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function WorkshopInfoComponent_div_19_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.alertMe());\n    });\n    i0.ɵɵtext(2, \"Alert me when its free\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class WorkshopInfoComponent {\n  apply() {\n    this.workshopService.applyForWorkshop(sessionStorage.getItem('username'), this.workshopId).subscribe(resp => {\n      this.applyMsg = resp['message'];\n    });\n  }\n  alertMe() {}\n  initMap() {\n    this.map = L.map('map', {\n      center: [this.workshop.long, this.workshop.lat],\n      zoom: 18\n    });\n    const tiles = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      maxZoom: 18,\n      minZoom: 3,\n      attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n    });\n    const marker = L.marker([this.workshop.long, this.workshop.lat]).addTo(this.map);\n    tiles.addTo(this.map);\n  }\n  constructor(route, workshopService) {\n    this.route = route;\n    this.workshopService = workshopService;\n    this.workshopId = route.snapshot.paramMap.get('workshopId');\n    workshopService.getWorkshopById(this.workshopId).subscribe(resp => {\n      this.workshop = resp;\n      console.log(this.workshop.lat);\n      console.log(this.workshop);\n      this.initMap();\n      workshopService.getGalleryPics(this.workshop._id).subscribe(resp2 => {\n        this.galleryPics = resp2;\n      });\n    });\n  }\n  ngAfterViewInit() {}\n}\nWorkshopInfoComponent.ɵfac = function WorkshopInfoComponent_Factory(t) {\n  return new (t || WorkshopInfoComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.WorkshopService));\n};\nWorkshopInfoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: WorkshopInfoComponent,\n  selectors: [[\"app-workshop-info\"]],\n  decls: 23,\n  vars: 6,\n  consts: [[\"rel\", \"stylesheet\", \"href\", \"https://unpkg.com/leaflet@1.9.3/dist/leaflet.css\", \"integrity\", \"sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=\", \"crossorigin\", \"\"], [\"name\", \"pictures\"], [4, \"ngFor\", \"ngForOf\"], [1, \"map-container\"], [1, \"map-frame\"], [\"id\", \"map\"], [4, \"ngIf\"], [\"href\", \"/user\"], [\"onerror\", \"this.src=\\\"http://localhost:4000/workshop.webp\\\"\", \"width\", \"50\", \"height\", \"50\", 3, \"src\"], [3, \"click\"]],\n  template: function WorkshopInfoComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"link\", 0);\n      i0.ɵɵelementStart(1, \"h1\");\n      i0.ɵɵtext(2, \"Workshop:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"h3\");\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"h1\");\n      i0.ɵɵtext(6, \"Description:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"p\");\n      i0.ɵɵtext(8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"h1\");\n      i0.ɵɵtext(10, \"Gallery:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"table\", 1);\n      i0.ɵɵtemplate(12, WorkshopInfoComponent_tr_12_Template, 3, 1, \"tr\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"h1\");\n      i0.ɵɵtext(14, \"Map:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"div\", 3)(16, \"div\", 4);\n      i0.ɵɵelement(17, \"div\", 5);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(18, WorkshopInfoComponent_div_18_Template, 3, 0, \"div\", 6);\n      i0.ɵɵtemplate(19, WorkshopInfoComponent_div_19_Template, 3, 0, \"div\", 6);\n      i0.ɵɵtext(20);\n      i0.ɵɵelementStart(21, \"a\", 7);\n      i0.ɵɵtext(22, \"Back\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(ctx.workshop.workshopName);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(ctx.workshop.workshopDesc);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.galleryPics);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.workshop.freeSpaces > 0 && ctx.workshop.status == 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.workshop.freeSpaces == 0 || ctx.workshop.status == 1);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\"\\n\", ctx.applyMsg, \"\\n\");\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf],\n  styles: [\".map-container[_ngcontent-%COMP%] {\\r\\n    height: 300px;\\r\\n    width: 300px;\\r\\n   \\r\\n  }\\r\\n  \\r\\n  .map-frame[_ngcontent-%COMP%] {\\r\\n    border: 2px solid black;\\r\\n    height: 100%;\\r\\n  }\\r\\n  \\r\\n  #map[_ngcontent-%COMP%] {\\r\\n    height: 100%;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvd29ya3Nob3AtaW5mby93b3Jrc2hvcC1pbmZvLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxhQUFhO0lBQ2IsWUFBWTs7RUFFZDs7RUFFQTtJQUNFLHVCQUF1QjtJQUN2QixZQUFZO0VBQ2Q7O0VBRUE7SUFDRSxZQUFZO0VBQ2QiLCJzb3VyY2VzQ29udGVudCI6WyIubWFwLWNvbnRhaW5lciB7XHJcbiAgICBoZWlnaHQ6IDMwMHB4O1xyXG4gICAgd2lkdGg6IDMwMHB4O1xyXG4gICBcclxuICB9XHJcbiAgXHJcbiAgLm1hcC1mcmFtZSB7XHJcbiAgICBib3JkZXI6IDJweCBzb2xpZCBibGFjaztcclxuICAgIGhlaWdodDogMTAwJTtcclxuICB9XHJcbiAgXHJcbiAgI21hcCB7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgfVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["L","i0","WorkshopInfoComponent","apply","workshopService","applyForWorkshop","sessionStorage","getItem","workshopId","subscribe","resp","applyMsg","alertMe","initMap","map","center","workshop","long","lat","zoom","tiles","tileLayer","maxZoom","minZoom","attribution","marker","addTo","constructor","route","snapshot","paramMap","get","getWorkshopById","console","log","getGalleryPics","_id","resp2","galleryPics","ngAfterViewInit","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\Matija Milosevic\\Downloads\\PIA\\InternetApplicationProject\\Projekat\\frontend\\src\\app\\workshop-info\\workshop-info.component.ts","C:\\Users\\Matija Milosevic\\Downloads\\PIA\\InternetApplicationProject\\Projekat\\frontend\\src\\app\\workshop-info\\workshop-info.component.html"],"sourcesContent":["import { AfterViewInit, Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Workshop } from '../models/workshop';\nimport { WorkshopService } from '../workshop.service';\nimport * as L from 'leaflet';\n\n\n@Component({\n  selector: 'app-workshop-info',\n  templateUrl: './workshop-info.component.html',\n  styleUrls: ['./workshop-info.component.css']\n})\n\nexport class WorkshopInfoComponent implements AfterViewInit  {\n  private map;\n  apply(){\n    this.workshopService.applyForWorkshop(sessionStorage.getItem('username'), this.workshopId).subscribe((resp)=>{\n        this.applyMsg = resp['message'];\n    })\n  }\n  alertMe(){\n    \n  }\n  private initMap(): void {\n    this.map = L.map('map', {\n      center: [ this.workshop.long, this.workshop.lat],\n      zoom: 18\n    });\n    const tiles = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      maxZoom: 18,\n      minZoom: 3,\n      attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n    });\n    const marker = L.marker([this.workshop.long, this.workshop.lat]).addTo(this.map);\n    tiles.addTo(this.map);\n    \n  }\n\n  constructor(private route : ActivatedRoute, private workshopService: WorkshopService) {\n    this.workshopId = route.snapshot.paramMap.get('workshopId');\n    workshopService.getWorkshopById(this.workshopId).subscribe((resp)=>{\n      this.workshop = resp as Workshop;\n      console.log(this.workshop.lat)\n      console.log(this.workshop)\n      this.initMap()\n      workshopService.getGalleryPics(this.workshop._id).subscribe((resp2)=>{\n        this.galleryPics = resp2 as string[]\n      })\n    })\n   }\n   workshopId : string;\n  workshopDesc: string;\n  workshop : Workshop;\n  galleryPics : string[]\n  applyMsg : string\n  ngAfterViewInit(): void {\n    \n  }\n  \n  \n\n\n}\n","<link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.3/dist/leaflet.css\"\nintegrity=\"sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=\"\ncrossorigin=\"\"/>\n <!-- Make sure you put this AFTER Leaflet's CSS -->\n <script src=\"https://unpkg.com/leaflet@1.9.3/dist/leaflet.js\"\n     integrity=\"sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=\"\n     crossorigin=\"\"></script>\n<h1>Workshop:</h1>\n<h3>{{workshop.workshopName}}</h3>\n<h1>Description:</h1>\n<p>{{workshop.workshopDesc}}</p>\n<h1>Gallery:</h1>\n<table name=\"pictures\">\n  <tr *ngFor=\"let picture of galleryPics\">\n    <td>\n      <img src=\"http://localhost:4000/{{picture}}\" onerror='this.src=\"http://localhost:4000/workshop.webp\"' width=\"50\" height=\"50\">\n    </td>\n    \n  </tr>\n</table>\n<h1>Map:</h1>\n<div class=\"map-container\">\n    <div class=\"map-frame\">\n      <div id=\"map\"></div>\n    </div>\n  </div>\n  <div *ngIf=\"workshop.freeSpaces > 0 && workshop.status == 0\">\n    <button (click)=\"apply()\">Apply</button>\n  </div>\n  <div *ngIf=\"workshop.freeSpaces == 0 || workshop.status == 1\">\n    <button (click)=\"alertMe()\">Alert me when its free</button>\n  </div>\n{{applyMsg}}\n<a href=\"/user\">Back</a>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}