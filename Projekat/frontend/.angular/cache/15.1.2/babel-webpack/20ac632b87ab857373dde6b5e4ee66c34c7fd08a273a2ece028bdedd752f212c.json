{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nexport class LoginComponent {\n  constructor(userService, router) {\n    this.userService = userService;\n    this.router = router;\n  }\n  ngOnInit() {}\n  login() {\n    this.userService.login(this.username, this.password).subscribe(user => {\n      this.message = '';\n      if (user.hasOwnProperty('message')) {\n        this.message = user['message'];\n      } else {\n        let userFromDB = user;\n        if (userFromDB.type_of_user == 0) {\n          sessionStorage.setItem('username', this.username);\n          sessionStorage.setItem('firstname', userFromDB.firstname);\n          sessionStorage.setItem('lastname', userFromDB.lastname);\n          sessionStorage.setItem('email', userFromDB.email);\n          sessionStorage.setItem('phonenumber', userFromDB.phonenumber);\n          sessionStorage.setItem('imagePath', userFromDB.image_path);\n          this.router.navigate(['user']);\n        } else if (userFromDB.type_of_user == 1) {\n          this.router.navigate(['organizer']);\n        } else {\n          this.router.navigate(['admin']);\n        }\n      }\n    });\n  }\n  switch_to_user_register() {\n    this.router.navigate(['register', {\n      is_user: 1\n    }]);\n  }\n  switch_to_organization_register() {\n    this.router.navigate(['register', {\n      is_user: 0\n    }]);\n  }\n  switch_to_forgot_password() {\n    this.router.navigate(['forgot-password']);\n  }\n  unregistered() {\n    this.router.navigate(['unregistered-user']);\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.Router));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 36,\n  vars: 3,\n  consts: [[\"type\", \"text\", \"name\", \"username\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"password\", 3, \"ngModel\", \"ngModelChange\"], [\"colspan\", \"2\"], [\"name\", \"Login\", 3, \"click\"], [\"name\", \"Continue as unregistered user\", 3, \"click\"], [\"role\", \"button\", \"href\", \"javascript:void(0)\", 3, \"click\"], [\"role\", \"button\", \"href\", \"javascript:void(0)\\n\", 3, \"click\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\")(1, \"table\")(2, \"tr\")(3, \"td\");\n      i0.ɵɵtext(4, \" Username: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"td\")(6, \"input\", 0);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_6_listener($event) {\n        return ctx.username = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(7, \"tr\")(8, \"td\");\n      i0.ɵɵtext(9, \" Password: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"td\")(11, \"input\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_11_listener($event) {\n        return ctx.password = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(12, \"tr\")(13, \"td\", 2)(14, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_14_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵtext(15, \"Login\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(16, \"tr\")(17, \"td\", 2)(18, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_18_listener() {\n        return ctx.unregistered();\n      });\n      i0.ɵɵtext(19, \"Continue as unregistered user\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵtext(20, \"\\nRegister as user \");\n      i0.ɵɵelementStart(21, \"a\", 5);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_a_click_21_listener() {\n        return ctx.switch_to_user_register();\n      });\n      i0.ɵɵtext(22, \"here\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(23, \"br\")(24, \"br\");\n      i0.ɵɵtext(25, \"\\nRegister as organization \");\n      i0.ɵɵelementStart(26, \"a\", 6);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_a_click_26_listener() {\n        return ctx.switch_to_organization_register();\n      });\n      i0.ɵɵtext(27, \"here\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(28, \"br\")(29, \"br\");\n      i0.ɵɵtext(30, \"\\nForgot password click \");\n      i0.ɵɵelementStart(31, \"a\", 6);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_a_click_31_listener() {\n        return ctx.switch_to_forgot_password();\n      });\n      i0.ɵɵtext(32, \"here\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(33, \"br\")(34, \"br\");\n      i0.ɵɵtext(35);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.username);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.password);\n      i0.ɵɵadvance(24);\n      i0.ɵɵtextInterpolate1(\" \", ctx.message, \" \");\n    }\n  },\n  dependencies: [i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.NgModel, i3.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["LoginComponent","constructor","userService","router","ngOnInit","login","username","password","subscribe","user","message","hasOwnProperty","userFromDB","type_of_user","sessionStorage","setItem","firstname","lastname","email","phonenumber","image_path","navigate","switch_to_user_register","is_user","switch_to_organization_register","switch_to_forgot_password","unregistered","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\Users\\Matija Milosevic\\Downloads\\PIA\\InternetApplicationProject\\Projekat\\frontend\\src\\app\\login\\login.component.ts","C:\\Users\\Matija Milosevic\\Downloads\\PIA\\InternetApplicationProject\\Projekat\\frontend\\src\\app\\login\\login.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { User } from '../models/user';\nimport { UserService } from '../user.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit {\n\n  constructor(private userService: UserService, private router: Router) { }\n\n  ngOnInit(): void {\n  }\n  username : string;\n  password : string;\n  message : string;\n\n  login(){\n    this.userService.login(this.username, this.password).subscribe((user)=>{\n      this.message = '';\n      if(user.hasOwnProperty('message')){\n        this.message = user['message'];\n      }\n      else{\n          \n          let userFromDB = user as User;\n        if(userFromDB.type_of_user == 0){\n          sessionStorage.setItem('username' , this.username);\n          sessionStorage.setItem('firstname' , userFromDB.firstname);\n          sessionStorage.setItem('lastname' , userFromDB.lastname);\n          sessionStorage.setItem('email', userFromDB.email);\n          sessionStorage.setItem('phonenumber' , userFromDB.phonenumber);\n          sessionStorage.setItem('imagePath', userFromDB.image_path);\n          this.router.navigate(['user'])\n        }\n        else if(userFromDB.type_of_user == 1){\n          this.router.navigate(['organizer'])\n        }\n        else{\n          this.router.navigate(['admin'])\n        }\n      }\n    });\n  }\n  switch_to_user_register(){\n    this.router.navigate(['register', {is_user: 1}])\n  }\n  switch_to_organization_register(){\n    this.router.navigate(['register', {is_user: 0}])\n  }\n  switch_to_forgot_password(){\n    this.router.navigate(['forgot-password'])\n  }\n  unregistered(){\n    this.router.navigate(['unregistered-user'])\n  }\n\n}\n","<form>\n<table>\n\n        <tr>\n            <td>\n                Username:\n            </td>\n            <td>\n                <input type=\"text\" name=\"username\" [(ngModel)]=\"username\">\n            </td>\n        </tr>\n        <tr>\n            <td>\n                Password:\n            </td>\n            <td>\n                <input type=\"text\" name=\"password\" [(ngModel)]=\"password\">\n            </td>\n        </tr>\n        <tr>\n            <td colspan=\"2\">\n                <button (click)=\"login()\" name=\"Login\">Login</button>\n            </td>\n        \n        </tr>\n        <tr>\n            <td colspan=\"2\">\n                <button (click)=\"unregistered()\" name=\"Continue as unregistered user\">Continue as unregistered user</button>\n            </td>\n        \n        </tr>        \n\n</table>\n</form>\nRegister as user <a role=\"button\" (click)=\"switch_to_user_register()\" href=\"javascript:void(0)\">here</a> <br> <br>\nRegister as organization <a role=\"button\" (click)=\"switch_to_organization_register()\" href=\"javascript:void(0)\n\">here</a> <br> <br>\nForgot password click <a role=\"button\" (click)=\"switch_to_forgot_password()\" href=\"javascript:void(0)\n\">here</a> <br> <br>\n\n{{message}}\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}