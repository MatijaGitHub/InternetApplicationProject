{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport * as L from 'leaflet';\nlet WorkshopInfoComponent = class WorkshopInfoComponent {\n  initMap() {\n    this.map = L.map('map', {\n      center: [this.workshop.long, this.workshop.lat],\n      zoom: 18\n    });\n    const tiles = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      maxZoom: 18,\n      minZoom: 3,\n      attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n    });\n    const marker = L.marker([this.workshop.long, this.workshop.lat]).addTo(this.map);\n    tiles.addTo(this.map);\n  }\n  apply() {\n    this.workshopService.applyForWorkshop(sessionStorage.getItem('username'), this.workshopId).subscribe(resp => {\n      this.applyMsg = resp['message'];\n    });\n  }\n  constructor(route, workshopService) {\n    this.route = route;\n    this.workshopService = workshopService;\n    this.workshopId = route.snapshot.paramMap.get('workshopId');\n    workshopService.getWorkshopById(this.workshopId).subscribe(resp => {\n      this.workshop = resp;\n      console.log(this.workshop.lat);\n      console.log(this.workshop);\n      this.initMap();\n      workshopService.getGalleryPics(this.workshop._id).subscribe(resp2 => {\n        this.galleryPics = resp2;\n      });\n    });\n  }\n  ngAfterViewInit() {}\n};\nWorkshopInfoComponent = __decorate([Component({\n  selector: 'app-workshop-info',\n  templateUrl: './workshop-info.component.html',\n  styleUrls: ['./workshop-info.component.css']\n})], WorkshopInfoComponent);\nexport { WorkshopInfoComponent };","map":{"version":3,"mappings":";AAAA,SAAwBA,SAAS,QAAgB,eAAe;AAIhE,OAAO,KAAKC,CAAC,MAAM,SAAS;AASrB,IAAMC,qBAAqB,GAA3B,MAAMA,qBAAqB;EAGxBC,OAAO;IACb,IAAI,CAACC,GAAG,GAAGH,CAAC,CAACG,GAAG,CAAC,KAAK,EAAE;MACtBC,MAAM,EAAE,CAAE,IAAI,CAACC,QAAQ,CAACC,IAAI,EAAE,IAAI,CAACD,QAAQ,CAACE,GAAG,CAAC;MAChDC,IAAI,EAAE;KACP,CAAC;IACF,MAAMC,KAAK,GAAGT,CAAC,CAACU,SAAS,CAAC,oDAAoD,EAAE;MAC9EC,OAAO,EAAE,EAAE;MACXC,OAAO,EAAE,CAAC;MACVC,WAAW,EAAE;KACd,CAAC;IACF,MAAMC,MAAM,GAAGd,CAAC,CAACc,MAAM,CAAC,CAAC,IAAI,CAACT,QAAQ,CAACC,IAAI,EAAE,IAAI,CAACD,QAAQ,CAACE,GAAG,CAAC,CAAC,CAACQ,KAAK,CAAC,IAAI,CAACZ,GAAG,CAAC;IAChFM,KAAK,CAACM,KAAK,CAAC,IAAI,CAACZ,GAAG,CAAC;EAEvB;EACAa,KAAK;IACH,IAAI,CAACC,eAAe,CAACC,gBAAgB,CAACC,cAAc,CAACC,OAAO,CAAC,UAAU,CAAC,EAAE,IAAI,CAACC,UAAU,CAAC,CAACC,SAAS,CAAEC,IAAI,IAAG;MACzG,IAAI,CAACC,QAAQ,GAAGD,IAAI,CAAC,SAAS,CAAC;IACnC,CAAC,CAAC;EACJ;EACAE,YAAoBC,KAAsB,EAAUT,eAAgC;IAAhE,UAAK,GAALS,KAAK;IAA2B,oBAAe,GAAfT,eAAe;IACjE,IAAI,CAACI,UAAU,GAAGK,KAAK,CAACC,QAAQ,CAACC,QAAQ,CAACC,GAAG,CAAC,YAAY,CAAC;IAC3DZ,eAAe,CAACa,eAAe,CAAC,IAAI,CAACT,UAAU,CAAC,CAACC,SAAS,CAAEC,IAAI,IAAG;MACjE,IAAI,CAAClB,QAAQ,GAAGkB,IAAgB;MAChCQ,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC3B,QAAQ,CAACE,GAAG,CAAC;MAC9BwB,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC3B,QAAQ,CAAC;MAC1B,IAAI,CAACH,OAAO,EAAE;MACde,eAAe,CAACgB,cAAc,CAAC,IAAI,CAAC5B,QAAQ,CAAC6B,GAAG,CAAC,CAACZ,SAAS,CAAEa,KAAK,IAAG;QACnE,IAAI,CAACC,WAAW,GAAGD,KAAiB;MACtC,CAAC,CAAC;IACJ,CAAC,CAAC;EACH;EAMDE,eAAe,IAEf;CAKD;AA9CYpC,qBAAqB,eANjCF,SAAS,CAAC;EACTuC,QAAQ,EAAE,mBAAmB;EAC7BC,WAAW,EAAE,gCAAgC;EAC7CC,SAAS,EAAE,CAAC,+BAA+B;CAC5C,CAAC,GAEWvC,qBAAqB,CA8CjC;SA9CYA,qBAAqB","names":["Component","L","WorkshopInfoComponent","initMap","map","center","workshop","long","lat","zoom","tiles","tileLayer","maxZoom","minZoom","attribution","marker","addTo","apply","workshopService","applyForWorkshop","sessionStorage","getItem","workshopId","subscribe","resp","applyMsg","constructor","route","snapshot","paramMap","get","getWorkshopById","console","log","getGalleryPics","_id","resp2","galleryPics","ngAfterViewInit","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\Matija Milosevic\\Downloads\\PIA\\InternetApplicationProject\\Projekat\\frontend\\src\\app\\workshop-info\\workshop-info.component.ts"],"sourcesContent":["import { AfterViewInit, Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Workshop } from '../models/workshop';\nimport { WorkshopService } from '../workshop.service';\nimport * as L from 'leaflet';\n\n\n@Component({\n  selector: 'app-workshop-info',\n  templateUrl: './workshop-info.component.html',\n  styleUrls: ['./workshop-info.component.css']\n})\n\nexport class WorkshopInfoComponent implements AfterViewInit  {\n  private map;\n\n  private initMap(): void {\n    this.map = L.map('map', {\n      center: [ this.workshop.long, this.workshop.lat],\n      zoom: 18\n    });\n    const tiles = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      maxZoom: 18,\n      minZoom: 3,\n      attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n    });\n    const marker = L.marker([this.workshop.long, this.workshop.lat]).addTo(this.map);\n    tiles.addTo(this.map);\n    \n  }\n  apply(){\n    this.workshopService.applyForWorkshop(sessionStorage.getItem('username'), this.workshopId).subscribe((resp)=>{\n        this.applyMsg = resp['message'];\n    })\n  }\n  constructor(private route : ActivatedRoute, private workshopService: WorkshopService) {\n    this.workshopId = route.snapshot.paramMap.get('workshopId');\n    workshopService.getWorkshopById(this.workshopId).subscribe((resp)=>{\n      this.workshop = resp as Workshop;\n      console.log(this.workshop.lat)\n      console.log(this.workshop)\n      this.initMap()\n      workshopService.getGalleryPics(this.workshop._id).subscribe((resp2)=>{\n        this.galleryPics = resp2 as string[]\n      })\n    })\n   }\n   workshopId : string;\n  workshopDesc: string;\n  workshop : Workshop;\n  galleryPics : string[]\n  applyMsg : string\n  ngAfterViewInit(): void {\n    \n  }\n  \n  \n\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}