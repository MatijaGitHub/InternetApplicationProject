{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../workshop.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction ChatComponent_tr_1_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 5);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const message_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", message_r1.message, \" \");\n  }\n}\nfunction ChatComponent_tr_1_td_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 6);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const message_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", message_r1.message, \" \");\n  }\n}\nfunction ChatComponent_tr_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, ChatComponent_tr_1_td_1_Template, 2, 1, \"td\", 3);\n    i0.ɵɵtemplate(2, ChatComponent_tr_1_td_2_Template, 2, 1, \"td\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const message_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", message_r1.user == ctx_r0.usernameFrom);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", message_r1.user != ctx_r0.usernameFrom);\n  }\n}\nexport class ChatComponent {\n  constructor(workshopService) {\n    this.workshopService = workshopService;\n  }\n  ngOnInit() {\n    this.usernameTo = sessionStorage.getItem('usernameTo');\n    this.usernameFrom = sessionStorage.getItem('usernameFrom');\n    this.workshopId = sessionStorage.getItem('workshopId');\n    this.workshopService.getChat(this.usernameFrom, this.workshopId).subscribe(resp => {\n      this.chat = resp;\n    });\n  }\n  sendMessage() {\n    this.workshopService.postMessageToChat(this.chat.usernameFrom, this.chat.usernameTo, messageToSend, this.chat.workshopId).subscribe(resp => {\n      this.workshopService.getChat(this.usernameFrom, this.workshopId).subscribe(resp => {\n        this.chat = resp;\n      });\n    });\n  }\n}\nChatComponent.ɵfac = function ChatComponent_Factory(t) {\n  return new (t || ChatComponent)(i0.ɵɵdirectiveInject(i1.WorkshopService));\n};\nChatComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ChatComponent,\n  selectors: [[\"app-chat\"]],\n  decls: 9,\n  vars: 2,\n  consts: [[4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", \"name\", \"sendMessage\", 3, \"ngModel\", \"ngModelChange\"], [3, \"click\"], [\"style\", \"display: flex; justify-content: left;\", 4, \"ngIf\"], [\"style\", \"display: flex; justify-content: right;\", 4, \"ngIf\"], [2, \"display\", \"flex\", \"justify-content\", \"left\"], [2, \"display\", \"flex\", \"justify-content\", \"right\"]],\n  template: function ChatComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"table\");\n      i0.ɵɵtemplate(1, ChatComponent_tr_1_Template, 3, 2, \"tr\", 0);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"table\")(3, \"tr\")(4, \"td\")(5, \"input\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function ChatComponent_Template_input_ngModelChange_5_listener($event) {\n        return ctx.sendMessage = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"td\")(7, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function ChatComponent_Template_button_click_7_listener() {\n        return ctx.sendMessage();\n      });\n      i0.ɵɵtext(8, \"Send\");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.chat.messages);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.sendMessage);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;;IAEQA,6BAAuF;IACnFA,YACJ;IAAAA,iBAAK;;;;IADDA,eACJ;IADIA,mDACJ;;;;;IACAA,6BAAwF;IACpFA,YACJ;IAAAA,iBAAK;;;;IADDA,eACJ;IADIA,mDACJ;;;;;IANJA,0BAA0C;IACtCA,iEAEK;IACLA,iEAEK;IACTA,iBAAK;;;;;IANIA,eAAkC;IAAlCA,6DAAkC;IAGlCA,eAAkC;IAAlCA,6DAAkC;;;ACI/C,OAAM,MAAOC,aAAa;EAExBC,YAAoBC,eAAgC;IAAhC,oBAAe,GAAfA,eAAe;EAAqB;EASxDC,QAAQ;IACN,IAAI,CAACC,UAAU,GAAGC,cAAc,CAACC,OAAO,CAAC,YAAY,CAAC;IACtD,IAAI,CAACC,YAAY,GAAGF,cAAc,CAACC,OAAO,CAAC,cAAc,CAAC;IAC1D,IAAI,CAACE,UAAU,GAAGH,cAAc,CAACC,OAAO,CAAC,YAAY,CAAC;IACtD,IAAI,CAACJ,eAAe,CAACO,OAAO,CAAC,IAAI,CAACF,YAAY,EAAE,IAAI,CAACC,UAAU,CAAC,CAACE,SAAS,CAAEC,IAAI,IAAG;MACjF,IAAI,CAACC,IAAI,GAAGD,IAAY;IAC1B,CAAC,CAAC;EACJ;EACAE,WAAW;IACT,IAAI,CAACX,eAAe,CAACY,iBAAiB,CAAC,IAAI,CAACF,IAAI,CAACL,YAAY,EAAE,IAAI,CAACK,IAAI,CAACR,UAAU,EAACW,aAAa,EAAC,IAAI,CAACH,IAAI,CAACJ,UAAU,CAAC,CAACE,SAAS,CAAEC,IAAI,IAAG;MACxI,IAAI,CAACT,eAAe,CAACO,OAAO,CAAC,IAAI,CAACF,YAAY,EAAE,IAAI,CAACC,UAAU,CAAC,CAACE,SAAS,CAAEC,IAAI,IAAG;QACjF,IAAI,CAACC,IAAI,GAAGD,IAAY;MAC1B,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;;AAzBWX,aAAa;mBAAbA,aAAa;AAAA;AAAbA,aAAa;QAAbA,aAAa;EAAAgB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDT1BrB,6BAAO;MACHA,4DAOK;MACTA,iBAAQ;MACRA,6BAAO;MAG2CA;QAAA;MAAA,EAAyB;MAA/DA,iBAAgE;MAEpEA,0BAAI;MACQA;QAAA,OAASsB,iBAAa;MAAA,EAAC;MAACtB,oBAAI;MAAAA,iBAAS;;;MAf7BA,eAAgB;MAAhBA,2CAAgB;MAYMA,eAAyB;MAAzBA,yCAAyB","names":["i0","ChatComponent","constructor","workshopService","ngOnInit","usernameTo","sessionStorage","getItem","usernameFrom","workshopId","getChat","subscribe","resp","chat","sendMessage","postMessageToChat","messageToSend","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Matija Milosevic\\Downloads\\PIA\\InternetApplicationProject\\Projekat\\frontend\\src\\app\\chat\\chat.component.html","C:\\Users\\Matija Milosevic\\Downloads\\PIA\\InternetApplicationProject\\Projekat\\frontend\\src\\app\\chat\\chat.component.ts"],"sourcesContent":["<table>\n    <tr *ngFor=\"let message of chat.messages\">\n        <td *ngIf=\"message.user == usernameFrom\" style=\"display: flex; justify-content: left;\">\n            {{message.message}}\n        </td>\n        <td *ngIf=\"message.user != usernameFrom\" style=\"display: flex; justify-content: right;\">\n            {{message.message}}\n        </td>\n    </tr>\n</table>\n<table>\n    <tr>\n        <td>\n            <input type=\"text\" name=\"sendMessage\" [(ngModel)]=\"sendMessage\">\n        </td>\n        <td>\n            <button (click)=\"sendMessage()\">Send</button>\n        </td>\n    </tr>\n</table>\n","import { Component, OnInit } from '@angular/core';\nimport { Chat } from '../models/chat';\nimport { WorkshopService } from '../workshop.service';\n\n@Component({\n  selector: 'app-chat',\n  templateUrl: './chat.component.html',\n  styleUrls: ['./chat.component.css']\n})\nexport class ChatComponent implements OnInit {\n\n  constructor(private workshopService: WorkshopService) { }\n\n\n\n  usernameTo: string;\n  usernameFrom: string;\n  workshopId: string;\n  messageToSend: string;\n  chat: Chat;\n  ngOnInit(): void {\n    this.usernameTo = sessionStorage.getItem('usernameTo');\n    this.usernameFrom = sessionStorage.getItem('usernameFrom');\n    this.workshopId = sessionStorage.getItem('workshopId');\n    this.workshopService.getChat(this.usernameFrom, this.workshopId).subscribe((resp)=>{\n      this.chat = resp as Chat;\n    })\n  }\n  sendMessage(){\n    this.workshopService.postMessageToChat(this.chat.usernameFrom, this.chat.usernameTo,messageToSend,this.chat.workshopId).subscribe((resp)=>{\n      this.workshopService.getChat(this.usernameFrom, this.workshopId).subscribe((resp)=>{\n        this.chat = resp as Chat;\n      })\n    })\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}