{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet BecomeOrganizatorComponent = class BecomeOrganizatorComponent {\n  constructor(workshopService, router) {\n    this.workshopService = workshopService;\n    this.router = router;\n    this.imageToUploadJSON = \"\";\n    this.galleryImagesToUploadJSON = [];\n  }\n  ngOnInit() {\n    this.user_type = +sessionStorage.getItem('user_type');\n  }\n  uploadImage(files) {\n    this.imageToUpload = files.item(0);\n    let image = new Image();\n    image.src = window.URL.createObjectURL(this.imageToUpload);\n    image.onload = () => {\n      if (image.width < 100 || image.height < 100 || image.width > 300 || image.height > 300) {\n        this.imageErr = '0';\n      } else {\n        this.imageErr = '2';\n      }\n      this.imageToUploadJSON = \"\";\n    };\n  }\n  sendWorkshopRequest() {\n    let formData = new FormData();\n    formData.append('workshopName', this.name_of_work);\n    formData.append('date', this.date.toString());\n    formData.append('shortDesc', this.shortDesc);\n    formData.append('longDesc', this.longDesc);\n    formData.append('lat', this.latitude);\n    formData.append('long', this.longtitude);\n    formData.append('place', this.place);\n    formData.append('numOfSpaces', this.numOfSpaces);\n    formData.append('username', sessionStorage.getItem('username'));\n    if (this.imageToUpload != null) {\n      formData.append('main_picture', this.imageToUpload);\n    } else {\n      formData.append('main_picture_path', this.imageToUploadJSON);\n    }\n    for (let f = 0; f < this.galleryImagesToUpload.length; f++) {\n      formData.append('gallery_pics', this.galleryImagesToUpload[f]);\n    }\n    this.workshopService.suggestWorkshop(formData).subscribe(resp => {\n      console.log(resp);\n    });\n  }\n  uploadImages(files) {\n    this.galleryImagesToUpload = [];\n    for (let i = 0; i < files.length; i++) {\n      this.galleryImagesToUpload[i] = files.item(i);\n      // let image = new Image();\n      // image.src = window.URL.createObjectURL(this.galleryImagesToUpload[i]);\n    }\n  }\n\n  changePass() {\n    this.router.navigate(['change-password']);\n  }\n  logout() {\n    sessionStorage.clear();\n    this.router.navigate(['']);\n  }\n  loadJSON(event) {\n    this.jsonFile = event.target.files[0];\n  }\n  parseJSON() {\n    const flReader = new FileReader();\n    flReader.readAsText(this.jsonFile, \"UTF-8\");\n    flReader.onload = () => {\n      let newWorkshop;\n      newWorkshop = JSON.parse(flReader.result.toString());\n      this.latitude = newWorkshop['lat'];\n      this.longtitude = newWorkshop['long'];\n      this.place = newWorkshop['workshopPlace'];\n      this.name_of_work = newWorkshop['workshopName'];\n      this.date = newWorkshop['workshopDate'];\n      this.imageToUploadJSON = newWorkshop['workshopMainImage'].slice(7);\n      this.shortDesc = newWorkshop['workshopDesc'];\n      this.galleryImagesToUploadJSON = [];\n      for (let galleryPic of newWorkshop['galleryPics']) {\n        this.galleryImagesToUploadJSON.push(galleryPic);\n      }\n    };\n  }\n};\nBecomeOrganizatorComponent = __decorate([Component({\n  selector: 'app-become-organizator',\n  templateUrl: './become-organizator.component.html',\n  styleUrls: ['./become-organizator.component.css']\n})], BecomeOrganizatorComponent);\nexport { BecomeOrganizatorComponent };","map":{"version":3,"mappings":"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","names":["Component","BecomeOrganizatorComponent","constructor","workshopService","router","ngOnInit","user_type","sessionStorage","getItem","uploadImage","files","imageToUpload","item","image","Image","src","window","URL","createObjectURL","onload","width","height","imageErr","imageToUploadJSON","sendWorkshopRequest","formData","FormData","append","name_of_work","date","toString","shortDesc","longDesc","latitude","longtitude","place","numOfSpaces","f","galleryImagesToUpload","length","suggestWorkshop","subscribe","resp","console","log","uploadImages","i","changePass","navigate","logout","clear","loadJSON","event","jsonFile","target","parseJSON","flReader","FileReader","readAsText","newWorkshop","JSON","parse","result","slice","galleryImagesToUploadJSON","galleryPic","push","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\Matija Milosevic\\Downloads\\PIA\\InternetApplicationProject\\Projekat\\frontend\\src\\app\\become-organizator\\become-organizator.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Workshop } from '../models/workshop';\nimport { WorkshopService } from '../workshop.service';\n\n@Component({\n  selector: 'app-become-organizator',\n  templateUrl: './become-organizator.component.html',\n  styleUrls: ['./become-organizator.component.css']\n})\nexport class BecomeOrganizatorComponent implements OnInit {\n\n  constructor(private workshopService: WorkshopService, private router: Router) { }\n\n  ngOnInit(): void {\n    this.user_type =  +sessionStorage.getItem('user_type');\n  }\n  user_type : number;\n  imageToUpload: File;\n  imageToUploadJSON : string | null = \"\";\n  galleryImagesToUpload: File[];\n  galleryImagesToUploadJSON : string[] | null = [];\n  imageErr: string;\n  name_of_work: string;\n  place: string;\n  latitude: string;\n  longtitude: string;\n  date: Date;\n  shortDesc: string;\n  longDesc: string;\n  numOfSpaces: string;\n  uploadImage(files: FileList):void{\n    this.imageToUpload = files.item(0);\n    let image = new Image()\n    image.src = window.URL.createObjectURL(this.imageToUpload)\n    image.onload = () => {\n      if(image.width < 100 || image.height < 100 || image.width > 300 || image.height > 300){\n        this.imageErr = '0';\n      } else {\n        this.imageErr = '2';\n        \n      } \n      this.imageToUploadJSON = \"\"               \n    }\n  }\n  sendWorkshopRequest(){\n    let formData = new FormData();\n    formData.append('workshopName', this.name_of_work);\n    formData.append('date', this.date.toString());\n    formData.append('shortDesc', this.shortDesc);\n    formData.append('longDesc', this.longDesc);\n    formData.append('lat', this.latitude);\n    formData.append('long', this.longtitude);\n    formData.append('place', this.place);\n    formData.append('numOfSpaces', this.numOfSpaces);\n    formData.append('username', sessionStorage.getItem('username'))\n    if(this.imageToUpload != null){\n      formData.append('main_picture', this.imageToUpload);\n    }\n    else{\n      formData.append('main_picture_path', this.imageToUploadJSON)\n    }\n    \n    for(let f = 0; f < this.galleryImagesToUpload.length; f++){\n      formData.append('gallery_pics', this.galleryImagesToUpload[f]);\n    }\n    this.workshopService.suggestWorkshop(formData).subscribe((resp)=>{\n        console.log(resp)\n    })\n  }\n  uploadImages(files: FileList):void{\n    this.galleryImagesToUpload = [];\n    for(let i = 0; i < files.length; i++){\n      this.galleryImagesToUpload[i] = files.item(i);\n      // let image = new Image();\n      // image.src = window.URL.createObjectURL(this.galleryImagesToUpload[i]);\n    }\n  }\n  changePass(){\n    this.router.navigate(['change-password']);\n  }\n  logout(){\n    sessionStorage.clear();\n    this.router.navigate(['']);\n  }\n  jsonFile : File;\n  loadJSON(event){\n    this.jsonFile = event.target.files[0]\n  }\n  parseJSON(){\n    const flReader = new FileReader();\n    flReader.readAsText(this.jsonFile, \"UTF-8\");\n    flReader.onload = () =>{\n      let newWorkshop;\n      newWorkshop = (JSON.parse(flReader.result.toString()))\n      this.latitude = newWorkshop['lat'];\n      this.longtitude = newWorkshop['long'];\n      this.place = newWorkshop['workshopPlace']\n      this.name_of_work = newWorkshop['workshopName'];\n      this.date = newWorkshop['workshopDate']\n      this.imageToUploadJSON = newWorkshop['workshopMainImage'].slice(7)\n     \n      this.shortDesc = newWorkshop['workshopDesc']\n      this.galleryImagesToUploadJSON = [];\n      for(let galleryPic of newWorkshop['galleryPics']){\n        this.galleryImagesToUploadJSON.push(galleryPic);\n      }\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}