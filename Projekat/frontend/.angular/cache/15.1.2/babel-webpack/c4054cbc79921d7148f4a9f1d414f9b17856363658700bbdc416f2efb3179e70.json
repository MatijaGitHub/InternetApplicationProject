{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../user.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction RegisterComponent_tr_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \" Name of organization (optional): \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 14);\n    i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_tr_38_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.name_of_org = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.name_of_org);\n  }\n}\nfunction RegisterComponent_tr_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 11)(2, \"p\");\n    i0.ɵɵtext(3, \"Address of organization (optional):\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction RegisterComponent_tr_40_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \" Country: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 15);\n    i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_tr_40_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.country = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.country);\n  }\n}\nfunction RegisterComponent_tr_41_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \" City: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 16);\n    i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_tr_41_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.city = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.city);\n  }\n}\nfunction RegisterComponent_tr_42_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \" Zipcode: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 17);\n    i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_tr_42_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.zipcode = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r4.zipcode);\n  }\n}\nfunction RegisterComponent_tr_43_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \" Street and number: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 18);\n    i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_tr_43_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.street = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r5.street);\n  }\n}\nfunction RegisterComponent_tr_44_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \" Identification number of organization (optional): \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 19);\n    i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_tr_44_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.id_num = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r6.id_num);\n  }\n}\nexport class RegisterComponent {\n  constructor(route, userService) {\n    this.route = route;\n    this.userService = userService;\n    this.firstname = \"\";\n    this.lastname = \"\";\n    this.username = \"\";\n    this.password = \"\";\n    this.confirm_password = \"\";\n    this.number = \"\";\n    this.email = \"\";\n    this.country = \"\";\n    this.city = \"\";\n    this.street = \"\";\n    this.zipcode = \"\";\n    this.is_user = 0;\n    this.name_of_org = \"\";\n    this.id_num = \"\";\n    this.imageErr = '1';\n  }\n  ngOnInit() {\n    this.is_user = +this.route.snapshot.paramMap.get('is_user');\n  }\n  register() {\n    this.errorMsg = \"\";\n    if (this.imageErr == '0') {\n      this.errorMsg = \"Image wrong size!\";\n      return;\n    }\n    if (this.firstname == \"\" || this.lastname == \"\" || this.username == \"\" || this.password == \"\" || this.confirm_password == \"\" || this.number == \"\" || this.email == \"\") {\n      this.errorMsg = \"Enter all fields!\";\n      return;\n    }\n    if (this.password != this.confirm_password) {\n      this.errorMsg = \"Passwords dont match!\";\n      return;\n    }\n    const emailRegex = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\n    const numberRegex = /^[0-9]{7,7}/;\n    const passwordRegex = /^(?=.*[A-Z])(?=.*[@$!%*?&])(?=.*\\d)[A-Za-z][A-Za-z\\d@$!%*?&]{7,15}$/;\n    if (!passwordRegex.test(this.password)) {\n      this.errorMsg = \"Password in wrong format!\";\n      return;\n    }\n    if (!emailRegex.test(this.email)) {\n      this.errorMsg = \"Email in wrong format!\";\n      return;\n    }\n    if (!numberRegex.test(this.number)) {\n      this.errorMsg = \"Number in wrong format!\";\n      return;\n    }\n    let data;\n    let formData = new FormData();\n    if (this.is_user) {\n      formData.append('is_user', '1');\n      formData.append('firstname', this.firstname);\n      formData.append('lastname', this.lastname);\n      formData.append('username', this.username);\n      formData.append('password', this.password);\n      formData.append('number', this.number);\n      formData.append('email', this.email);\n      formData.append('image', this.imageToUpload);\n      formData.append('hasImage', this.imageErr);\n      data = {\n        is_user: 1,\n        firstname: this.firstname,\n        lastname: this.lastname,\n        username: this.username,\n        password: this.password,\n        number: this.number,\n        email: this.email\n      };\n    } else {\n      if (!(this.city == \"\" && this.country == \"\" && this.street == \"\" && this.zipcode == \"\" || this.city != \"\" && this.country != \"\" && this.street != \"\" && this.zipcode != \"\")) {\n        this.errorMsg = \"Enter all address fields!\";\n        return;\n      }\n      formData.append('is_user', '0');\n      formData.append('firstname', this.firstname);\n      formData.append('lastname', this.lastname);\n      formData.append('username', this.username);\n      formData.append('password', this.password);\n      formData.append('number', this.number);\n      formData.append('email', this.email);\n      formData.append('image', this.imageToUpload);\n      formData.append('city', this.city);\n      formData.append('name_of_org', this.name_of_org);\n      formData.append('country', this.country);\n      formData.append('street', this.street);\n      formData.append('id_num', this.id_num);\n      formData.append('zipcode', this.zipcode);\n      formData.append('hasImage', this.imageErr);\n      data = {\n        is_user: 0,\n        firstname: this.firstname,\n        lastname: this.lastname,\n        username: this.username,\n        password: this.password,\n        number: this.number,\n        email: this.email,\n        city: this.city,\n        name_of_org: this.name_of_org,\n        country: this.country,\n        street: this.street,\n        id_num: this.id_num,\n        zipcode: this.zipcode\n      };\n    }\n    this.userService.register(formData, this.imageToUpload).subscribe(resp => {\n      this.errorMsg = resp['message'];\n    });\n  }\n  uploadImage(files) {\n    this.imageToUpload = files.item(0);\n    let image = new Image();\n    image.src = window.URL.createObjectURL(this.imageToUpload);\n    image.onload = () => {\n      if (image.width < 100 || image.height < 100 || image.width > 300 || image.height > 300) {\n        this.imageErr = '0';\n      } else {\n        this.imageErr = '2';\n      }\n    };\n  }\n}\nRegisterComponent.ɵfac = function RegisterComponent_Factory(t) {\n  return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.UserService));\n};\nRegisterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RegisterComponent,\n  selectors: [[\"app-register\"]],\n  inputs: {\n    is_user: \"is_user\"\n  },\n  decls: 57,\n  vars: 15,\n  consts: [[\"enctype\", \"multipart/form-data\"], [\"type\", \"text\", \"name\", \"firstname\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"lastname\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"username\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"password\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"confirm_password\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"number\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"email\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngIf\"], [1, \"form-group\"], [\"type\", \"file\", 3, \"change\"], [\"colspan\", \"2\"], [\"name\", \"Register\", 3, \"click\"], [\"href\", \"\"], [\"type\", \"text\", \"name\", \"name_of_org\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"country\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"city\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"zipcode\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"street\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"id_num\", 3, \"ngModel\", \"ngModelChange\"]],\n  template: function RegisterComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0)(1, \"table\")(2, \"tr\")(3, \"td\");\n      i0.ɵɵtext(4, \" Firstname: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"td\")(6, \"input\", 1);\n      i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_6_listener($event) {\n        return ctx.firstname = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(7, \"tr\")(8, \"td\");\n      i0.ɵɵtext(9, \" Lastname: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"td\")(11, \"input\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_11_listener($event) {\n        return ctx.lastname = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(12, \"tr\")(13, \"td\");\n      i0.ɵɵtext(14, \" Username: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"td\")(16, \"input\", 3);\n      i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_16_listener($event) {\n        return ctx.username = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(17, \"tr\")(18, \"td\");\n      i0.ɵɵtext(19, \" Password: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"td\")(21, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_21_listener($event) {\n        return ctx.password = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(22, \"tr\")(23, \"td\");\n      i0.ɵɵtext(24, \" Confirm password: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"td\")(26, \"input\", 5);\n      i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_26_listener($event) {\n        return ctx.confirm_password = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(27, \"tr\")(28, \"td\");\n      i0.ɵɵtext(29, \" Contact number: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"td\")(31, \"input\", 6);\n      i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_31_listener($event) {\n        return ctx.number = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(32, \"tr\");\n      i0.ɵɵelementStart(33, \"tr\")(34, \"td\");\n      i0.ɵɵtext(35, \" Email: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"td\")(37, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_37_listener($event) {\n        return ctx.email = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(38, RegisterComponent_tr_38_Template, 5, 1, \"tr\", 8);\n      i0.ɵɵtemplate(39, RegisterComponent_tr_39_Template, 4, 0, \"tr\", 8);\n      i0.ɵɵtemplate(40, RegisterComponent_tr_40_Template, 5, 1, \"tr\", 8);\n      i0.ɵɵtemplate(41, RegisterComponent_tr_41_Template, 5, 1, \"tr\", 8);\n      i0.ɵɵtemplate(42, RegisterComponent_tr_42_Template, 5, 1, \"tr\", 8);\n      i0.ɵɵtemplate(43, RegisterComponent_tr_43_Template, 5, 1, \"tr\", 8);\n      i0.ɵɵtemplate(44, RegisterComponent_tr_44_Template, 5, 1, \"tr\", 8);\n      i0.ɵɵelementStart(45, \"tr\")(46, \"div\", 9)(47, \"input\", 10);\n      i0.ɵɵlistener(\"change\", function RegisterComponent_Template_input_change_47_listener($event) {\n        return ctx.uploadImage($event.target.files);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(48, \"tr\")(49, \"td\", 11)(50, \"button\", 12);\n      i0.ɵɵlistener(\"click\", function RegisterComponent_Template_button_click_50_listener() {\n        return ctx.register();\n      });\n      i0.ɵɵtext(51, \"Register\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵtext(52, \" Loginuj se \");\n      i0.ɵɵelementStart(53, \"a\", 13);\n      i0.ɵɵtext(54, \"ovde\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(55, \"br\");\n      i0.ɵɵtext(56);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.firstname);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.lastname);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.username);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.password);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.confirm_password);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.number);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.email);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.is_user == 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.is_user == 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.is_user == 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.is_user == 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.is_user == 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.is_user == 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.is_user == 0);\n      i0.ɵɵadvance(12);\n      i0.ɵɵtextInterpolate1(\" \", ctx.errorMsg, \" \");\n    }\n  },\n  dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgModel, i4.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","RegisterComponent","constructor","route","userService","ngOnInit","is_user","snapshot","paramMap","get","register","errorMsg","imageErr","firstname","lastname","username","password","confirm_password","number","email","emailRegex","numberRegex","passwordRegex","test","data","formData","FormData","append","imageToUpload","city","country","street","zipcode","name_of_org","id_num","subscribe","resp","uploadImage","files","item","image","Image","src","window","URL","createObjectURL","onload","width","height","selectors","inputs","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Matija Milosevic\\Downloads\\PIA\\InternetApplicationProject\\Projekat\\frontend\\src\\app\\register\\register.component.html","C:\\Users\\Matija Milosevic\\Downloads\\PIA\\InternetApplicationProject\\Projekat\\frontend\\src\\app\\register\\register.component.ts"],"sourcesContent":["<form enctype=\"multipart/form-data\">\n    <table>\n        <tr>\n            <td>\n                Firstname:\n            </td>\n            <td>\n                <input type=\"text\" name=\"firstname\" [(ngModel)]=\"firstname\">\n            </td>\n        </tr> \n        <tr>\n            <td>\n                Lastname:\n            </td>\n            <td>\n                <input type=\"text\" name=\"lastname\" [(ngModel)]=\"lastname\">\n            </td>\n        </tr>\n            <tr>\n                <td>\n                    Username:\n                </td>\n                <td>\n                    <input type=\"text\" name=\"username\" [(ngModel)]=\"username\">\n                </td>\n            </tr>\n            <tr>\n                <td>\n                    Password:\n                </td>\n                <td>\n                    <input type=\"text\" name=\"password\" [(ngModel)]=\"password\">\n                </td>\n            </tr>\n            <tr>\n                <td>\n                    Confirm password:\n                </td>\n                <td>\n                    <input type=\"text\" name=\"confirm_password\" [(ngModel)]=\"confirm_password\">\n                </td>\n            </tr>\n            <tr>\n                <td>\n                    Contact number:\n                </td>\n                <td>\n                    <input type=\"text\" name=\"number\" [(ngModel)]=\"number\">\n                </td>\n            </tr>\n            <tr>\n                <tr>\n                    <td>\n                        Email:\n                    </td>\n                    <td>\n                        <input type=\"text\" name=\"email\" [(ngModel)]=\"email\">\n                    </td>\n                </tr>\n                <tr *ngIf=\"is_user == 0\">\n                    <td>\n                        Name of organization (optional):\n                    </td>\n                    <td>\n                        <input type=\"text\" name=\"name_of_org\" [(ngModel)]=\"name_of_org\">\n                    </td>\n                </tr>\n                <tr *ngIf=\"is_user == 0\">\n                    <td colspan=\"2\">\n                        <p>Address of organization (optional):</p>\n                    </td>\n                </tr>\n                <tr *ngIf=\"is_user == 0\">\n                    <td>\n                        Country:\n                    </td>\n                    <td>\n                        <input type=\"text\" name=\"country\" [(ngModel)]=\"country\">\n                    </td>\n                </tr>\n                <tr *ngIf=\"is_user == 0\">\n                    <td>\n                        City:\n                    </td>\n                    <td>\n                        <input type=\"text\" name=\"city\" [(ngModel)]=\"city\">\n                    </td>\n                </tr>\n                <tr *ngIf=\"is_user == 0\">\n                    <td>\n                        Zipcode:\n                    </td>\n                    <td>\n                        <input type=\"text\" name=\"zipcode\" [(ngModel)]=\"zipcode\">\n                    </td>\n                </tr>\n                <tr *ngIf=\"is_user == 0\">\n                    <td>\n                        Street and number:\n                    </td>\n                    <td>\n                        <input type=\"text\" name=\"street\" [(ngModel)]=\"street\">\n                    </td>\n                </tr>\n                <tr *ngIf=\"is_user == 0\">\n                    <td>\n                        Identification number of organization (optional):\n                    </td>\n                    <td>\n                        <input type=\"text\" name=\"id_num\" [(ngModel)]=\"id_num\">\n                    </td>\n                </tr>\n                <tr>\n                    <div class=\"form-group\">\n                        \n                    <input type=\"file\" (change)=\"uploadImage($any($event).target.files)\">\n                    </div>\n                </tr>\n            <tr>\n                <td colspan=\"2\">\n                    <button (click)=\"register()\" name=\"Register\">Register</button>\n                </td>\n            \n            </tr>     \n         \n    </table>\n\n    </form>\n    Loginuj se <a href=\"\">ovde</a> <br>\n    {{errorMsg}}\n\n    \n    ","import { Component, Input, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Address } from '../models/user';\nimport { UserService } from '../user.service';\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.component.html',\n  styleUrls: ['./register.component.css']\n})\nexport class RegisterComponent implements OnInit {\n\n  constructor(private route: ActivatedRoute, private userService: UserService) { }\n\n  ngOnInit(): void {\n    this.is_user = +this.route.snapshot.paramMap.get('is_user');\n  }\n  firstname: string | null = \"\";\n  lastname: string| null = \"\";\n  username: string| null = \"\";\n  password: string| null = \"\";\n  confirm_password: string| null = \"\";\n  number: string| null = \"\";\n  email: string| null = \"\";\n  country: string| null = \"\";\n  city: string| null = \"\";\n  street: string| null = \"\";\n  zipcode: string| null = \"\";\n  @Input() is_user: number | null = 0;\n  name_of_org: string| null = \"\";\n  id_num: string| null = \"\";\n  imageErr: string| null = '1';\n  errorMsg: string;\n  address: Address;\n  imageToUpload : File;\n  register(){\n    this.errorMsg = \"\";\n    if(this.imageErr == '0'){\n      this.errorMsg = \"Image wrong size!\";\n      return;\n    }\n    if(this.firstname == \"\" || this.lastname == \"\" || this.username == \"\" || this.password == \"\" \n        || this.confirm_password == \"\" || this.number == \"\" || this.email == \"\"){\n      this.errorMsg = \"Enter all fields!\";\n      return;\n    }\n    if(this.password != this.confirm_password){\n      this.errorMsg = \"Passwords dont match!\";\n      return;\n    }\n    const emailRegex: RegExp = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\n    const numberRegex: RegExp = /^[0-9]{7,7}/;\n    const passwordRegex: RegExp = /^(?=.*[A-Z])(?=.*[@$!%*?&])(?=.*\\d)[A-Za-z][A-Za-z\\d@$!%*?&]{7,15}$/\n    if(!passwordRegex.test(this.password)){\n      this.errorMsg = \"Password in wrong format!\";\n      return;\n    }\n    if(!emailRegex.test(this.email)){\n      this.errorMsg = \"Email in wrong format!\";\n      return;\n    }\n    if(!numberRegex.test(this.number)){\n      this.errorMsg = \"Number in wrong format!\";\n      return;\n    }\n    let data;\n    let formData : FormData = new FormData();\n\n    if(this.is_user){\n      \n      formData.append('is_user', '1');\n      formData.append('firstname', this.firstname);\n      formData.append('lastname', this.lastname);\n      formData.append('username', this.username);\n      formData.append('password', this.password);\n      formData.append('number', this.number);\n      formData.append('email', this.email);\n      formData.append('image', this.imageToUpload);\n      formData.append('hasImage', this.imageErr);\n      \n      data = {\n        is_user : 1,\n        firstname : this.firstname,\n        lastname : this.lastname,\n        username : this.username,\n        password : this.password,\n        number : this.number,\n        email : this.email\n      }\n\n    }\n    else{\n      if(!((this.city == \"\" && this.country == \"\" && this.street == \"\" && this.zipcode == \"\")\n      ||(this.city != \"\" && this.country != \"\" && this.street != \"\" && this.zipcode != \"\"))){\n        this.errorMsg = \"Enter all address fields!\";\n        return;\n      }\n      formData.append('is_user', '0');\n      formData.append('firstname', this.firstname);\n      formData.append('lastname', this.lastname);\n      formData.append('username', this.username);\n      formData.append('password', this.password);\n      formData.append('number', this.number);\n      formData.append('email', this.email);\n      formData.append('image', this.imageToUpload);\n      formData.append('city', this.city);\n      formData.append('name_of_org', this.name_of_org);\n      formData.append('country', this.country);\n      formData.append('street', this.street);\n      formData.append('id_num', this.id_num);\n      formData.append('zipcode', this.zipcode);\n      formData.append('hasImage', this.imageErr);\n      data = {\n        is_user : 0,\n        firstname : this.firstname,\n        lastname : this.lastname,\n        username : this.username,\n        password : this.password,\n        number : this.number,\n        email : this.email,\n        city : this.city,\n        name_of_org : this.name_of_org,\n        country : this.country,\n        street: this.street,\n        id_num : this.id_num,\n        zipcode: this.zipcode\n      }\n      \n\n    }\n  \n    this.userService.register(formData, this.imageToUpload).subscribe((resp)=>{\n        this.errorMsg = resp['message'];\n    })\n  }\n  uploadImage(files: FileList):void{\n    this.imageToUpload = files.item(0);\n    let image = new Image()\n    image.src = window.URL.createObjectURL(this.imageToUpload)\n    image.onload = () => {\n      if(image.width < 100 || image.height < 100 || image.width > 300 || image.height > 300){\n        this.imageErr = '0';\n      } else {\n        this.imageErr = '2';\n        \n      }                \n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}