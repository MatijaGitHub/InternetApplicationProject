<mat-sidenav-container class="example-container">
    <mat-sidenav mode="side" opened>
        <table>
            <tr>
                <button routerLink="/user-info">Profile</button>
            </tr>
            <tr>
                <button routerLink="/user-workshops">Workshops</button>
            </tr>
            <tr>
                <button routerLink="/become-organizer">Become organizer</button>
            </tr>
            <tr *ngIf="user_type == 2">
                <button routerLink="/edit-users">All users</button>
           </tr>
           <tr *ngIf="user_type == 2">
                <button routerLink="/registration-requests">Registration requests</button>
            </tr>
            <tr *ngIf="user_type==2">
                <button routerLink="/insert-new-user">Add new user</button>
            </tr>
            <tr *ngIf="user_type==2">
                <button routerLink="/workshop-aprove">Aprove workshops</button>
            </tr>
           

        </table>
        
            <form>
                <button (click)="changePass()">Change password</button>
            </form>
        
            <form>
                <button (click)="logout()">Logout</button>
            </form>
        


    </mat-sidenav>
    <mat-sidenav-content>
        <table>
            <tr *ngFor="let user of users;let userIndex = index;">
                <table>
                    <tr>
                        <td>
                            Firstname:
                        </td>
                        <td>
                            {{user.firstname}}
                        </td>
                        <td *ngIf="edit[userIndex] == 1">
                            <input type="text" name="firstnameUpdate" [(ngModel)]="firstnameUpd[userIndex]">
                        </td>
                        <td *ngIf="edit[userIndex] == 1">
                            <button (click)="changeFirstname(user,userIndex)">Change</button>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Lastname:
                        </td>
                        <td>
                            {{user.lastname}}
                        </td>
                        <td *ngIf="edit[userIndex] == 1">
                            <input type="text" name="lastnameUpdate" [(ngModel)]="lastnameUpd[userIndex]">
                        </td>
                        <td *ngIf="edit[userIndex] == 1">
                            <button (click)="changeLastname(user,userIndex)">Change</button>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Username:
                        </td>
                        <td>
                            {{user.username}}
                        </td>
                        <td *ngIf="edit[userIndex] == 1">
                            <input type="text" name="usernameUpdate" [(ngModel)]="usernameUpd[userIndex]">
                        </td>
                        <td *ngIf="edit[userIndex] == 1">
                            <button (click)="changeUsername(user,userIndex)">Change</button>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Phone number:
                        </td>
                        <td>
                            {{user.phonenumber}}
                        </td>
                        <td *ngIf="edit[userIndex] == 1">
                            <input type="text" name="phonenumberUpdate" [(ngModel)]="phonenumberUpd[userIndex]">
                        </td>
                        <td *ngIf="edit[userIndex] == 1">
                            <button (click)="changePhonenumber(user,userIndex)">Change</button>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Email:
                        </td>
                        <td>
                            {{user.email}}
                        </td>
                        <td *ngIf="edit[userIndex] == 1">
                            <input type="text" name="emailUpdate" [(ngModel)]="emailUpd[userIndex]">
                        </td>
                        <td *ngIf="edit[userIndex] == 1">
                            <button (click)="changeEmail(user,userIndex)">Change</button>
                        </td>
                    </tr>
                    <tr>
                        <tr>
                            <td>
                                Profile picture:
                            </td>
                            <td>
                                <img src="http://localhost:4000/{{user.image_path.slice(7)}}" onerror='this.src="http://localhost:4000/blank-profile-picture-973460__340.webp"' width="50" height="50">
                            </td>
                            <td *ngIf="edit[userIndex] == 1">
                                <div class="form-group">
                                        
                                    <input type="file" (change)="uploadImage($any($event).target.files, userIndex)">
                                    </div>
                            </td>
                            <td *ngIf="edit[userIndex] == 1">
                                <button (click)="changePicture(user,userIndex)">Change</button>
                            </td>
                        </tr>
                        <tr>
                        <td>
                            <button (click)="editEnable(userIndex)">Edit mode</button>
                        </td>
                        <td>
                            <p *ngIf="edit[userIndex] == 1">On</p>
                            <p *ngIf="edit[userIndex] == 0">Off</p>
                        </td>
                        <td>
                            <button (click)="deleteUser(user, userIndex)">Delete user</button>
                        </td>
                    </tr>
                </table>
            </tr>
        </table>
    </mat-sidenav-content>
